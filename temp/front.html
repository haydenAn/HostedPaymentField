<!DOCTYPE html>
<html>



<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>JS Bin</title>
</head>

<body>
    <script type="text/javascript" src="https://sandbox.bluesnap.com/web-sdk/4/bluesnap.js"></script>

    <!-- <iframe allowPaymentRequest='true' src="myCheckoutPage" name='ifrm' id='ifrm'></iframe> -->
    <script>
        var HOSTEDFIELDTOKENID = "eyJhbGciOiJIUzI1NiJ9.eyJwYXlsb2FkIjp7ImNvbW1vbkp3dFBheWxvYWQiOnsiaWQiOiIxMjUyNTc3NjY1MTQzNDQ5Mzc4MTM1MzciLCJkYXRlQ3JlYXRlZCI6MTYyNzI4ODE1NzIxMH0sIm1lcmNoYW50SWQiOjkxMzIwOSwic2VudHJ5Ijp7Im1lcmNoYW50IjpmYWxzZSwiYXBwcyI6W119fX0.Ie-lWweAceEYBhMKA1TsSgxI1yBFFbatr-tBA266Qyg._"
        var jsonData = {
            token: HOSTEDFIELDTOKENID,
            title: "BlueSnap Example",
            description: "This is description for example...",
            img: "/developers/571747/download.jpg",
            amount: "150",
            currency: "EUR",
            buttonLabel: "Click to buy",
            billingDetails: true,
            includeEmail: true,
            language: "EN",
            shopperData: {
                firstname: "Someone",
                lastname: "JustExample"
            }
        }
        function callbackFunction(eCheckOutResult) {
            console.log(eCheckOutResult)
            //this is the action that is called immediately after the shopper clicks the last function "BUY"
            if (eCheckOutResult.code == 1) { // On Success
                // Your code here...
                // This where you need to process the payment via an API request from your server
            }
            else { // On Error (code=10 - invalid jsonData, any other codes are errors, on error 
                if (eCheckOutResult.info) {
                    var errors = eCheckOutResult.info.errors; // will be undefined if no errors have occurred
                    var warnings = eCheckOutResult.info.warnings; // will be undefined if no warnings have occurred
                }
            }
            bluesnap.embeddedCheckoutClose();
        }
        function setUpBS() {
            console.log("set up got triggered")
            bluesnap.embeddedCheckoutSetup(jsonData, callbackFunction);
        }
        function openEmbeddedCheckout() {
            console.log("open check out triggered")
            bluesnap.embeddedCheckoutOpen();
        }
        // function createNewToken(){
        //     var token = bluesnap.hostedPaymentFieldsCreation
        // }

    </script>
    <button onclick="setUpBS()">set Up</button>
    <button onclick="openEmbeddedCheckout()">check out</button>
    <!-- <button onclick="createNewToken()">create new token</button> -->


</body>

</html>